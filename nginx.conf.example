# Example Nginx configuration for Lemmeric
# Add this to your server block

# Handle post URLs: /post/123 -> /post.html?id=123
location ~ ^/post/([0-9]+)/?$ {
    rewrite ^/post/([0-9]+)/?$ /post.html?id=$1 last;
}

# Handle community URLs: /c/community_name -> /community.html?name=community_name
location ~ ^/c/([^/?]+)/?$ {
    rewrite ^/c/([^/?]+)/?$ /community.html?name=$1 last;
}

# Handle user URLs: /u/username -> /user.html?username=username
location ~ ^/u/([^/?]+)/?$ {
    rewrite ^/u/([^/?]+)/?$ /user.html?username=$1 last;
}

# Handle other pages
location = /communities {
    rewrite ^/communities/?$ /communities.html last;
}

location = /search {
    rewrite ^/search/?$ /search.html last;
}

location = /create-post {
    rewrite ^/create-post/?$ /create_post.html last;
}

location = /create-community {
    rewrite ^/create-community/?$ /create-community.html last;
}

location = /inbox {
    rewrite ^/inbox/?$ /inbox.html last;
}

location = /settings {
    rewrite ^/settings/?$ /settings.html last;
}

# Main location block
location / {
    try_files $uri $uri/ =404;
}

# Cache static assets
location ~* \.(css|js|png|jpg|jpeg|gif|svg|woff|woff2)$ {
    expires 1y;
    add_header Cache-Control "public, immutable";
}

# Enable gzip compression
gzip on;
gzip_vary on;
gzip_min_length 1024;
gzip_types
    text/plain
    text/css
    text/xml
    text/javascript
    application/javascript
    application/xml+rss
    application/json; 